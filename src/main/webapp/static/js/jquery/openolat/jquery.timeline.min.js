(function(y){function G(b,a){var c=jQuery("#"+a.parentContainerId),h=c.width();b.width(h);var f=b.height();500>c.height()&&(f=500);b.height(f);e=a.values;l=a.endTime;m=a.startTime;z=a.status;n=h-80-60;p=f-10-40;var H=d3.timeFormat(a.dateFormat);A=function(d){return H(new Date(d))};B=d3.scaleLinear().domain([0,1]).range([0,n]);C=d3.axisBottom(B).ticks(0);c=null==a.startTime?d3.min(e,function(d){return d.time}):a.startTime;a=null==a.endTime?d3.max(e,function(d){return d.time}):a.endTime;q=d3.scaleLinear().domain([c,
a]).range([p,0]);v=d3.axisLeft(q).ticks(5).tickFormat(A).tickSize(-n,5);g=d3.select("#"+b.attr("id")).append("svg").attr("width",n+80+60).attr("height",p+10+40).append("g").attr("transform","translate(80,10)");t=d3.scaleLinear().domain([0,1]).range([0,n]);D=d3.scaleLinear().domain([0,w]).range([p,0]);u=d3.scaleLinear().domain([c,a]).range([0,w]);E=d3.line().x(function(d){return t((1.5+Math.sin(1.1*d.y))/3)}).y(function(d){return D(d.y)}).curve(d3.curveLinear)}function I(b,a){jQuery("#"+a.parentContainerId+
" .o_timeline_up a").on("click",function(){k||(k=!0,l+=r,m+=r,F(!0))});jQuery("#"+a.parentContainerId+" .o_timeline_down a").on("click",function(){k||(k=!0,l-=r,m-=r,F(!1))})}function F(b){try{u.domain([m,l]),q.domain([m,l]),g.select(".y").call(v),J(b)}catch(a){window.console&&console.log(a)}}function J(b){g.selectAll(".dot").data(e,x).transition().duration(1E3).ease(d3.easeLinear).attrTween("cx",function(a){return function(c){c=(1-c)*r;return t((1.5+Math.sin(1.1*u(b?a.time+c:a.time-c)))/3)}}).attr("cy",
function(a){return q(a.time)}).on("end",function(){k=!1})}function K(b,a){g.append("g").attr("class","x axis").attr("transform","translate(0,"+p+")").call(C);g.append("g").attr("class","y axis").call(v).append("text").attr("class","label").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").attr("dx","-.71em").style("text-anchor","end").text("Date");b=[];for(a=0;a<20*w;a++)b.push({y:0==a?0:a/20});g.append("path").data([b]).attr("d",E).attr("class","o_timeline_curve");b=g.selectAll(".dot").data(e,
x);b.enter().append("g").append("circle").attr("r",function(c){return 7+Math.floor(5*Math.random())}).attr("id",x).attr("class",function(c){return"dot o_pf_status_"+c.status}).attr("cx",function(c){return t((1.5+Math.sin(1.1*u(c.time)))/3)}).attr("cy",function(c){return q(c.time)});jQuery("g .dot").tooltip({html:!0,container:"body",title:function(){for(var c=jQuery(this).attr("id"),h,f=e.length;0<f--;)c==e[f].id&&(h=e[f]);return"\x3cp\x3e"+h.title+"\x3cbr\x3eStatus: "+z[h.status]+"\x3c/p\x3e"}});
b.exit()}function x(b){return b.id}y.fn.timeline=function(b){this.data("data-oo-timeline");if("undefined"===typeof timeline){b=y.extend({parentContainerId:"",startTime:null,endTime:null,dateFormat:"%d.%m.%y",dateLabel:"Date",status:{draft:"Draft",published:"Published",inRevision:"In revision",closed:"Closed",deleted:"Deleted"},values:[]},b);this.data("data-oo-timeline",b);k=!1;var a=jQuery("#"+b.parentContainerId);a.prepend("\x3cdiv class\x3d'o_timeline_up'\x3e\x3ca href\x3d'javascript:;' onclick\x3d''\x3e\x3ci class\x3d'o_icon o_icon-lg o_icon o_icon_slide_up'\x3e \x3c/i\x3e\x3c/a\x3e\x3c/div\x3e");
a.append("\x3cdiv class\x3d'o_timeline_down'\x3e\x3ca href\x3d'javascript:;' onclick\x3d''\x3e\x3ci class\x3d'o_icon o_icon-lg o_icon o_icon_slide_down'\x3e \x3c/i\x3e\x3c/a\x3e\x3c/div\x3e");G(this,b);K(this,b);I(this,b)}return this};var g,w=10,B,q,C,v,n,p,E,t,D,u,A,m,l,e,z,r=158112E5,k=!1})(jQuery);