(function(x){function y(b,d,c){try{"histogramScore"==d?z(b,c):"histogramDuration"==d?A(b,c):"horizontalBarSingleChoice"==d?B(b,c):"rightAnswerPerItem"==d?C(b,c):"averageScorePerItem"==d?D(b,c):"horizontalBarMultipleChoice"==d?E(b,c):"horizontalBarMultipleChoiceSurvey"==d?F(b,c):"highScore"==d&&G(b,c)}catch(e){window.console&&console.log(e)}}function D(b,d){var c=b.width(),e=d.values.reverse(),f=c-60-60;c=e.length*d.barHeight;b.height(c+10+40+"px");var h=d3.scaleLinear().domain([0,d3.max(e,function(g){return g[1]})]).range([0,
f]),l=d3.axisBottom(h).ticks(10),k=d3.scaleBand().domain(e.map(function(g){return g[0]})).rangeRound([c,0]),n=d3.axisLeft(k);b=d3.select("#"+b.attr("id")).append("svg").attr("width",f+60+60).attr("height",c+10+40).append("g").attr("transform","translate(60,10)");b.append("g").attr("class","x axis").attr("transform","translate(0,"+c+")").call(l).append("text").attr("y",40/1.7).attr("x",f/2).attr("dy","1em").attr("fill","#000").style("text-anchor","middle").text(d.xBottomLegend);b.selectAll(".bar0").data(e).enter().append("rect").attr("class",
"bar bar_default").attr("fill","bar_default").attr("x",0).attr("y",function(g){return k(g[0])+2}).attr("width",function(g){return h(g[1])}).attr("height",k.bandwidth()-4);var a=d3.format(".2");f=k.bandwidth()/2+3+"px";b.selectAll(".bar0").data(e).enter().append("text").attr("x",function(g){return h(g[1])}).attr("y",function(g){return k(g[0])+2}).attr("dx",-3).attr("dy",f).attr("text-anchor","end").attr("fill","rgb(48,48,48)").attr("stroke","none").text(function(g){return 0>=g[1]?"":a(g[1])});b.append("g").attr("class",
"y axis").call(n).append("text").attr("transform","rotate(-90)").attr("y",-(60/1.7)).attr("x",-(c/2)).attr("dy","1em").attr("fill","#000").style("text-anchor","middle").text(d.yLeftLegend)}function C(b,d){var c=b.width(),e=d.values.reverse(),f=c-60-60;c=e.length*d.barHeight;b.height(c+15+40+"px");var h=d.participants,l=d3.scaleLinear().domain([0,h]).range([0,f]);h=d3.scaleLinear().domain([0,1]).range([0,f]);var k=d3.axisBottom(h).ticks(10,"%"),n=d3.scaleBand().domain(e.map(function(a){return a[0]})).rangeRound([c,
0]);h=d3.axisLeft(n);b=d3.select("#"+b.attr("id")).append("svg").attr("width",f+60+60).attr("height",c+15+40).append("g").attr("transform","translate(60,15)");b.append("g").attr("class","x axis").attr("transform","translate(0,"+c+")").call(k).append("text").attr("y",40/1.7).attr("x",f/2).attr("dy","1em").attr("fill","#000").style("text-anchor","middle").text(d.xTopLegend);b.selectAll(".bar0").data(e).enter().append("rect").attr("class","bar bar_green").attr("fill","bar_green").attr("x",0).attr("y",
function(a){return n(a[0])+2}).attr("width",function(a){return l(a[1])}).attr("height",n.bandwidth()-4);f=n.bandwidth()/2+3+"px";b.selectAll(".bar0").data(e).enter().append("text").attr("x",function(a){return l(a[1])}).attr("y",function(a){return n(a[0])+2}).attr("dx",-3).attr("dy",f).attr("text-anchor","end").attr("fill","rgb(48,48,48)").attr("stroke","none").text(function(a){return 0>=a[1]?"":a[1]});b.append("g").attr("class","y axis").call(h).append("text").attr("transform","rotate(-90)").attr("y",
-(60/1.7)).attr("x",-(c/2)).attr("dy","1em").attr("fill","#000").style("text-anchor","middle").text(d.yLeftLegend)}function F(b,d){var c=b.width(),e=d.values.reverse(),f=e.length*d.barHeight;b.height(f+40+40+"px");c=c-40-15;var h=d.participants,l=d3.scaleLinear().domain([0,h]).range([0,c]);h=d3.scaleLinear().domain([0,1]).range([0,c]);h=d3.axisBottom(h).ticks(10,"%");var k=d3.scaleBand().domain(e.map(function(a){return a[0]})).rangeRound([f,0]),n=d3.axisLeft(k);b=d3.select("#"+b.attr("id")).append("svg").attr("width",
c+40+15).attr("height",f+40+40).append("g").attr("transform","translate(40,40)");b.append("g").attr("class","x axis").attr("transform","translate(0,"+f+")").call(h).append("text").attr("y",40/1.7).attr("x",c/2).attr("dy","1em").attr("fill","#000").style("text-anchor","middle").text(d.xBottomLegend);b.append("g").attr("class","y axis").call(n).append("text").attr("transform","rotate(-90)").attr("y",-40).attr("x",-(f/2)).attr("dy","1em").attr("fill","#000").style("text-anchor","middle").text(d.yLeftLegend);
b.selectAll(".bar0").data(e).enter().append("rect").attr("class","bar bar_default").attr("fill","bar_default").attr("x",0).attr("y",function(a){return k(a[0])+2}).attr("width",function(a){return l(a[1])}).attr("height",k.bandwidth()-4);d=k.bandwidth()/2+3+"px";b.selectAll(".bar0").data(e).enter().append("text").attr("x",function(a){return l(a[1])}).attr("y",function(a){return k(a[0])+2}).attr("dx",-3).attr("dy",d).attr("text-anchor","end").attr("fill","rgb(48,48,48)").attr("stroke","none").text(function(a){return 0>=
a[1]?"":a[1]})}function E(b,d){var c=b.width(),e=d.values.reverse(),f=e.length*d.barHeight;b.height(f+40+40+"px");c=c-40-15;var h=d.participants,l=d3.scaleLinear().domain([0,h]).range([0,c]);h=d3.scaleLinear().domain([0,1]).range([0,c]);h=d3.axisBottom(h).ticks(10,"%");var k=d3.scaleBand().domain(e.map(function(a){return a[0]})).rangeRound([f,0]),n=d3.axisLeft(k);b=d3.select("#"+b.attr("id")).append("svg").attr("width",c+40+15).attr("height",f+40+40).append("g").attr("transform","translate(40,40)");
b.append("g").attr("class","x axis").attr("transform","translate(0,"+f+")").call(h).append("text").attr("y",40/1.7).attr("x",c/2).attr("dx","1em").attr("fill","#000").style("text-anchor","middle").text(d.xBottomlegend);b.append("g").attr("class","y axis").call(n).append("text").attr("transform","rotate(-90)").attr("y",-40).attr("x",-(f/2)).attr("dy","1em").attr("fill","#000").style("text-anchor","middle").text(d.yLeftLegend);b.selectAll(".bar0").data(e).enter().append("rect").attr("class","bar bar_green").attr("fill",
"bar_green").attr("x",0).attr("y",function(a){return k(a[0])+2}).attr("width",function(a){return l(a[1])}).attr("height",k.bandwidth()-4);d=k.bandwidth()/2+3+"px";b.selectAll(".bar0").data(e).enter().append("text").attr("x",function(a){return l(a[1])}).attr("y",function(a){return k(a[0])+2}).attr("dx",-3).attr("dy",d).attr("text-anchor","end").attr("fill","rgb(48,48,48)").attr("stroke","none").text(function(a){return 0>=a[1]?"":a[1]});b.selectAll(".bar1").data(e).enter().append("rect").attr("class",
"bar bar_red").attr("fill","bar_red").attr("x",function(a){return l(a[1])}).attr("y",function(a){return k(a[0])+2}).attr("width",function(a){return l(a[2])}).attr("height",k.bandwidth()-4);b.selectAll(".bar1").data(e).enter().append("text").attr("x",function(a){return l(a[1]+a[2])}).attr("y",function(a){return k(a[0])+2}).attr("dx",-3).attr("dy",d).attr("text-anchor","end").attr("fill","rgb(48,48,48)").attr("stroke","none").text(function(a){return 0>=a[2]?"":a[2]});b.selectAll(".bar2").data(e).enter().append("rect").attr("class",
"bar bar_grey").attr("fill","bar_grey").attr("x",function(a){return l(a[1]+a[2])}).attr("y",function(a){return k(a[0])+2}).attr("width",function(a){return l(a[3])}).attr("height",k.bandwidth()-4);b.selectAll(".bar2").data(e).enter().append("text").attr("x",function(a){return l(a[1]+a[2]+a[3])}).attr("y",function(a){return k(a[0])+2}).attr("dx",-3).attr("dy",d).attr("text-anchor","end").attr("fill","rgb(48,48,48)").attr("stroke","none").text(function(a){return 0>=a[3]?"":a[3]})}function B(b,d){var c=
b.width(),e=d.values.reverse(),f=d.colors.reverse(),h=e.length*d.barHeight;b.height(h+15+40+"px");c=c-40-15;var l=d.participants,k=d3.scaleLinear().domain([0,l]).range([0,c]);l=d3.scaleLinear().domain([0,1]).range([0,c]);var n=d3.axisBottom(l).ticks(10,"%"),a=d3.scaleBand().domain(e.map(function(g){return g[0]})).rangeRound([h,0]);l=d3.axisLeft(a);b=d3.select("#"+b.attr("id")).append("svg").attr("width",c+40+15).attr("height",h+15+40).append("g").attr("transform","translate(40,15)");b.append("g").attr("class",
"x axis").attr("transform","translate(0,"+h+")").call(n).append("text").attr("y",40/1.7).attr("x",c/2).attr("dy","1em").attr("fill","#000").style("text-anchor","middle").text(d.xBottomLegend);b.selectAll(".bar0").data(e).enter().append("rect").attr("class",function(g,v){return null==f?"bar bar0 bar_default":f.length>v?f[v]:"bar bar0 bar_default"}).attr("fill","bar_green").attr("x",0).attr("y",function(g){return a(g[0])+2}).attr("width",function(g){return k(g[1])}).attr("height",a.bandwidth()-4);c=
a.bandwidth()/2+3+"px";b.selectAll(".bar0").data(e).enter().append("text").attr("x",function(g){return k(g[1])}).attr("y",function(g){return a(g[0])+2}).attr("dx",-3).attr("dy",c).attr("text-anchor","end").attr("fill","rgb(48,48,48)").attr("stroke","none").text(function(g){return 0>=g[1]?"":g[1]});b.append("g").attr("class","y axis").call(l).append("text").attr("transform","rotate(-90)").attr("y",-40).attr("x",-(h/2)).attr("dy","1em").attr("fill","#000").style("text-anchor","middle").text(d.yLeftLegend)}
function A(b,d){var c=b.height(),e=b.width(),f=d.values,h=d3.max(f,function(p){return p}),l=new Date(2012,0,1,0,0),k=void 0;if(10>h){var n=d3.timeFormat("%M:%S:%L");k=function(p){return n(new Date(l.getTime()+1E3*p))}}else if(3600>h){var a=d3.timeFormat("%M:%S");k=function(p){return a(new Date(l.getTime()+1E3*p))}}else k=function(p){return Math.round(p/60)};e=e-60-60;var g=c-10-40,v=.1*h,r=d3.scaleLinear().domain([0,h+v]).range([0,e]),u=d3.histogram().domain(r.domain()).thresholds(r.ticks())(f),q=
d3.sum(u,function(p){return p.length}),t=d3.scaleLinear().domain([0,d3.max(u,function(p){return p.length})]).range([g,0]);f=d3.scaleLinear().domain([0,d3.max(u,function(p){return p.length/q})]).range([g,0]);k=d3.axisBottom(r).tickFormat(k);c=d3.axisRight(t).ticks(10);f=d3.axisLeft(f).ticks(10,"%");b=d3.select("#"+b.attr("id")).append("svg").attr("width",e+60+60).attr("height",g+10+40).append("g").attr("transform","translate(60,10)");b.selectAll(".bar").data(u).enter().append("g").attr("class","bar bar_default").attr("transform",
function(p){return"translate("+r(p.x0)+","+t(p.length)+")"}).append("rect").attr("x",2).attr("width",function(p){var m=r(u[0].x1)-r(u[0].x0)-4;p=r(p.x0);p+m>r(h+v)&&(m=m-(p+m-r(h+v))-2);return m}).attr("height",function(p){return g-t(p.length)});b.append("g").attr("class","y axis").call(f).append("text").attr("transform","rotate(-90)").attr("y",-60).attr("x",-(g/2)).attr("dy","1em").attr("fill","#000").style("text-anchor","middle").text(d.yLeftLegend);b.append("g").attr("class","x axis").attr("transform",
"translate(0,"+g+")").call(k).append("text").attr("y",40/1.1).attr("x",e/2).attr("dx","1em").attr("fill","#000").style("text-anchor","middle").text(d.xBottomLegend);b.append("g").attr("class","y axis").attr("transform","translate("+e+",0)").call(c).append("text").attr("transform","rotate(90)").attr("y",-60).attr("x",g/2).attr("dy","1em").attr("fill","#000").style("text-anchor","middle").text(d.yRightLegend)}function z(b,d){var c=b.height(),e=b.width(),f=d.values;e=e-60-60;var h=c-10-40,l=d.cut,k=
d3.max(f,function(q){return q});1>k&&(k=1);var n=.1*k;1>n&&(n=1);var a=d3.scaleLinear().domain([0,k+n]).range([0,e]);c=15>k?a.ticks(k):a.ticks();var g=d3.histogram().domain(a.domain()).thresholds(c)(f),v=d3.sum(g,function(q){return q.length}),r=d3.scaleLinear().domain([0,d3.max(g,function(q){return q.length})]).range([h,0]),u=d3.scaleLinear().domain([0,d3.max(g,function(q){return q.length/v})]).range([h,0]);f=d3.axisBottom(a);f=15>k?f.ticks(k):f.ticks();f=f.tickFormat(d3.format("d"));c=d3.axisRight(r).ticks(10);
u=d3.axisLeft(u).ticks(10,"%");b=d3.select("#"+b.attr("id")).append("svg").attr("width",e+60+60).attr("height",h+10+40).append("g").attr("transform","translate(60,10)");b.selectAll(".bar").data(g).enter().append("g").attr("class",function(q,t){return null==l?"bar bar_default":g[t].x<l?"bar bar_red":"bar bar_green"}).attr("transform",function(q){return"translate("+(a(q.x0)-2)+","+r(q.length)+")"}).append("rect").attr("x",2).attr("width",function(q){var t=a(g[0].x1)-a(g[0].x0)-2;q=a(q.x0);q+t>a(k+n)&&
(t-=q+t-a(k+n));return t}).attr("height",function(q){return h-r(q.length)});b.append("g").attr("class","y axis").call(u).append("text").attr("transform","rotate(-90)").attr("y",-60).attr("x",-(h/2)).attr("dy","1em").attr("fill","#000").style("text-anchor","middle").text(d.yLeftLegend);b.append("g").attr("class","x axis").attr("transform","translate(0,"+h+")").call(f).append("text").attr("y",40/1.1).attr("x",e/2).attr("dx","1em").attr("fill","#000").style("text-anchor","middle").text(d.xBottomLegend);
b.append("g").attr("class","y axis").attr("transform","translate("+e+",0)").call(c).append("text").attr("transform","rotate(90)").attr("y",-60).attr("x",h/2).attr("dy","1em").attr("fill","#000").style("text-anchor","middle").text(d.yRightLegend)}function G(b,d){var c=b.height(),e=b.width(),f=d.values,h=e-60-60,l=c-20-40,k=d.cut;e=d3.max(f,function(m){return m});var n=d3.min(f,function(m){return m});c=1;null!=d.step&&(c=d.step);var a=e+c,g=n-c,v=d3.scaleLinear().domain([g,a]).range([0,h]);e=d3.range(g,
a+c,c);var r=d3.histogram().thresholds(e)(f),u=d3.sum(r,function(m){return m.length}),q=d3.scaleLinear().domain([0,d3.max(r,function(m){return m.length})]).range([l,0]),t=d3.scaleLinear().domain([0,d3.max(r,function(m){return m.length/u})]).range([l,0]);f=d3.axisBottom(v).tickValues(e).tickFormat(d3.format("d"));n=d3.axisRight(q).ticks(10);t=d3.axisLeft(t).ticks(10,"%");b=d3.select("#"+b.attr("id")).append("svg").attr("width",h+60+60).attr("height",l+20+40).append("g").attr("transform","translate(60,20)");
var p=d3.range(g,a+c,c);b.selectAll(".bar").data(r).enter().append("g").attr("class",function(m,w){return null==k?"o_empty":r[w].x==k?"o_myself":"o_other"}).attr("transform",function(m){return"translate("+v(m.x0)+","+q(m.length)+")"}).append("rect").attr("x",function(m,w){return-(h/p.length)/2}).attr("y",function(m){return l-q(m.length)}).attr("width",h/e.length).attr("height",function(m){return 0}).style("opacity",0).transition().delay(function(m,w){return 200*w/(a-g)}).duration(800).attr("y",function(m){return 0}).attr("height",
function(m){return l-q(m.length)}).style("opacity",1);b.append("g").attr("class","y axis").call(t).append("text").attr("transform","rotate(-90)").attr("y",-60).attr("x",-(l/2)).attr("dy","1em").attr("fill","#000").style("text-anchor","middle").text(d.yLeftLegend);b.append("g").attr("class","x axis").attr("transform","translate(0,"+l+")").call(f).append("text").attr("y",40/1.1).attr("x",h/2).attr("dx","1em").attr("fill","#000").style("text-anchor","middle").text(d.xBottomLegend);b.append("g").attr("class",
"y axis").attr("transform","translate("+h+",0)").call(n).append("text").attr("transform","rotate(90)").attr("y",-60).attr("x",l/2).attr("dy","1em").attr("fill","#000").style("text-anchor","middle").text(d.yRightLegend)}x.fn.qtiStatistics=function(b,d){var c=x.extend({values:[],colors:[],cut:null,step:null,participants:-1,mapperUrl:"-",barHeight:40,xTopLegend:"x Top",xBottomLegend:"x Bottom",yLeftLegend:"y Left",yRightLegend:"y Right"},d),e=this;y(e,b,c);jQuery(window).resize(function(){jQuery(e).empty();
y(e,b,c)});return this}})(jQuery);